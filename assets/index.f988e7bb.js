var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,a=(e,a)=>{for(var c in a||(a={}))n.call(a,c)&&s(e,c,a[c]);if(t)for(var c of t(a))l.call(a,c)&&s(e,c,a[c]);return e};import{R as c,r as i,u as r,L as o,a as m,b as d,c as u,d as h,B as p,e as v}from"./vendor.8add25a4.js";var g={tabbarComp:"_tabbar-comp_lb4ez_1",tabbarItem:"_tabbar-item_lb4ez_13",current:"_current_lb4ez_29",title:"_title_lb4ez_34"};const E=[{titleZh:"知乎蓝",hex:"#06f"},{titleZh:"掘金蓝",hex:"#007fff"},{titleZh:"美团黄",hex:"#FFC300"},{titleZh:"网易红",hex:"#C20C0E"},{titleZh:"京东到家绿",hex:"#25c156"},{titleZh:"微信绿",hex:"#0FBE5D"},{titleZh:"思否绿",hex:"#009a61"}],_=c.createContext({value:E[0],setTheme:e=>{}}),f=_.Provider;_.Consumer;var x=e=>{const{value:{hex:t}}=i.exports.useContext(_),n="#666",l=26;return{Home:()=>c.createElement("svg",{t:"1617749417885",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4271",width:l,height:l},c.createElement("path",{d:"M919.2 419.2L531.2 141.6c-11.2-8-26.4-8-36.8 0L104 419.2c-12.8 8.8-6.4 28.8 9.6 28.8H192v432c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16V640h192v240c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16V448h78.4c15.2 0 21.6-20 8.8-28.8z","p-id":"4272",fill:n})),HomeSelected:()=>c.createElement("svg",{t:"1617749417885",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4271",width:l,height:l},c.createElement("path",{d:"M919.2 419.2L531.2 141.6c-11.2-8-26.4-8-36.8 0L104 419.2c-12.8 8.8-6.4 28.8 9.6 28.8H192v432c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16V640h192v240c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16V448h78.4c15.2 0 21.6-20 8.8-28.8z","p-id":"4272",fill:t})),Msg:()=>c.createElement("svg",{t:"1617749285791",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3969",width:l,height:l},c.createElement("path",{d:"M510.4 63.2c-212 0-384 172-384 384 0 184.8 131.2 340 305.6 376l80 138.4 80-138.4C764.8 785.6 894.4 632 894.4 448c0-212.8-172-384.8-384-384.8zM319.2 512c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64zM512 512c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m191.2 0c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z","p-id":"3970",fill:n})),MsgSelected:()=>c.createElement("svg",{t:"1617749285791",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3969",width:l,height:l},c.createElement("path",{d:"M510.4 63.2c-212 0-384 172-384 384 0 184.8 131.2 340 305.6 376l80 138.4 80-138.4C764.8 785.6 894.4 632 894.4 448c0-212.8-172-384.8-384-384.8zM319.2 512c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64zM512 512c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m191.2 0c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z","p-id":"3970",fill:t})),User:()=>c.createElement("svg",{t:"1617749352954",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4138",width:l,height:l},c.createElement("path",{d:"M500 128.8c-95.2 5.6-173.6 83.2-180 178.4-7.2 112 80.8 205.6 191.2 205.6 106.4 0 192-86.4 192-192 0.8-110.4-92-198.4-203.2-192zM512 575.2c-128 0-383.2 64-383.2 192v96c0 17.6 14.4 32 32 32h702.4c17.6 0 32-14.4 32-32V766.4c0-127.2-255.2-191.2-383.2-191.2z","p-id":"4139",fill:n})),UserSelected:()=>c.createElement("svg",{t:"1617749352954",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4138",width:l,height:l},c.createElement("path",{d:"M500 128.8c-95.2 5.6-173.6 83.2-180 178.4-7.2 112 80.8 205.6 191.2 205.6 106.4 0 192-86.4 192-192 0.8-110.4-92-198.4-203.2-192zM512 575.2c-128 0-383.2 64-383.2 192v96c0 17.6 14.4 32 32 32h702.4c17.6 0 32-14.4 32-32V766.4c0-127.2-255.2-191.2-383.2-191.2z","p-id":"4139",fill:t}))}[e.name]()};const N=[{url:"/home/index",title:"首页",icon:()=>c.createElement(x,{name:"Home"}),selectedIcon:()=>c.createElement(x,{name:"HomeSelected"})},{url:"/msg/index",title:"仓库",icon:()=>c.createElement(x,{name:"Msg"}),selectedIcon:()=>c.createElement(x,{name:"MsgSelected"})},{url:"/user/index",title:"我的",icon:()=>c.createElement(x,{name:"User"}),selectedIcon:()=>c.createElement(x,{name:"UserSelected"})}];function w(){const e=r();return c.createElement("div",{className:g.tabbarComp},N.map((t=>{const n=e.pathname===t.url;return c.createElement(o,{className:`${g.tabbarItem} ${n?g.current:""}`,to:t.url,key:t.url,replace:!0},c.createElement("div",{className:g.icon},n?t.selectedIcon():t.icon()),c.createElement("div",{className:g.title},t.title))})))}const b=e=>{const{url:t,method:n,body:l}=e;return new Promise(((e,s)=>{const c={method:n,headers:{"Content-Type":"application/json"}};["post","put"].includes(n)&&(c.body=JSON.stringify(l)),fetch(t,a({},c)).then((function(e){try{return e.json()}catch(t){console.log("error",t)}})).then((function(n){t.startsWith("https://api.github.com")?e(n):"10000"!==n.code?s(n):e(n.data)})).catch((e=>{console.log("fetch err",e),s(e)}))}))};var y=new class{getRecommendList(){return b({url:"https://www.fastmock.site/mock/17ad4659e546df135e2027055aba5443/zhihu/home/getRecommendList",method:"post",body:{theme:"#ffe400"}})}};var C={listTitle:"_list-title_11nvq_1",listTitleText:"_list-title-text_11nvq_18",listContainer:"_list-container_11nvq_34",listItem:"_list-item_11nvq_41",itemTop:"_item-top_11nvq_47",itemHeadImg:"_item-head-img_11nvq_52",itemUserInfo:"_item-user-info_11nvq_58",itemUserName:"_item-user-name_11nvq_62",itemUpdateTime:"_item-update-time_11nvq_66",title:"_title_11nvq_71",content:"_content_11nvq_78",desc:"_desc_11nvq_85",mainPic:"_main-pic_11nvq_89",flex:"_flex_11nvq_96",fill:"_fill_11nvq_102"};const S=e=>{const[t,n]=i.exports.useState([]),[l,s]=i.exports.useState(!1),a=()=>{e().then((e=>{console.log("请求结果",e),console.log("新列表",t.concat(e));const l=t.concat(e);n(l),s(!0)}))};return i.exports.useEffect((()=>{console.log("useEffect"),a()}),[]),window.onscroll=function(){var e,t,n,l;n=0,l=0,document.body&&(n=document.body.scrollTop),document.documentElement&&(l=document.documentElement.scrollTop),(n-l>0?n:l)+("CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight)==(e=0,t=0,document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t)&&(document.getElementById("more"),console.log("触底"),a())},[t,l]},I=e=>{i.exports.useEffect((()=>{const{title:t}=e;document.title=t}),[])};function M(){const[e,t]=S(y.getRecommendList),{value:n}=i.exports.useContext(_);return I({title:"首页"}),c.createElement("div",{className:C.homeIndexPage},c.createElement("div",{className:C.listContainer},c.createElement("div",{className:C.listTitle},c.createElement("div",{className:C.listTitleText},"推荐")),t?c.createElement(c.Fragment,null,e.map(((e,t)=>c.createElement("div",{className:C.listItem,key:`${e.id}${t}`},c.createElement("div",{className:C.itemTop},c.createElement("img",{className:C.itemHeadImg,src:e.headimg}),c.createElement("div",{className:C.itemUserInfo},c.createElement("div",{className:C.itemUserName},e.user),c.createElement("div",{className:C.itemUpdateTime},e.timeStamp))),c.createElement("div",{className:C.itemMain},c.createElement("div",{className:C.title},e.title),c.createElement("div",{className:C.content},c.createElement("div",{className:C.desc},e.desc),c.createElement("img",{src:e.mainPic,alt:"",className:C.mainPic}))))))):c.createElement("div",{className:`${C.flex} ${C.fill}`},c.createElement(m,{type:"spokes",color:n.hex,height:40,width:40}))),c.createElement(w,null))}var z=new class{getRepoDetail(){return b({url:"https://api.github.com/users/lexmin0412/repos",method:"get"})}};var q="_list-title_hxkyt_1",F="_list-title-text_hxkyt_18",T="_list-container_hxkyt_35",k="_list-item_hxkyt_39";function L(){I({title:"仓库"});const[e,t]=S(z.getRepoDetail);return c.createElement("div",null,c.createElement("div",{className:q},c.createElement("div",{className:F},"仓库")),t?c.createElement("div",{className:T},e.map(((e,t)=>c.createElement("div",{className:k},e.name)))):c.createElement("div",null,"loading"),c.createElement(w,null))}var P={userMain:"_user-main_1pt04_1",userInfo:"_user-info_1pt04_8",userName:"_user-name_1pt04_12",themeSetting:"_theme-setting_1pt04_19",themeSettingTitle:"_theme-setting-title_1pt04_23",currentTheme:"_current-theme_1pt04_31",themeList:"_theme-list_1pt04_36",themeSettingItem:"_theme-setting-item_1pt04_40",logout:"_logout_1pt04_47"},H=()=>c.createElement("svg",{t:"1617743948751",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2044",width:"16",height:"16"},c.createElement("path",{d:"M127.431111 455.111111a40.96 40.96 0 0 0 0 36.408889A427.235556 427.235556 0 0 0 493.226667 739.555556L158.72 404.48a444.302222 444.302222 0 0 0-31.288889 50.631111zM893.724444 449.422222C853.333333 384 732.728889 208.782222 512 208.782222a401.066667 401.066667 0 0 0-223.573333 66.56L207.644444 194.56 143.36 258.844444l74.524444 74.524445 100.693334 102.4 233.244444 231.537778 60.871111 61.44 101.262223 101.262222 64.284444-64.284445-72.248889-72.248888a455.111111 455.111111 0 0 0 189.44-193.422223 52.337778 52.337778 0 0 0-1.706667-50.631111zM638.293333 625.777778l-64.853333-65.422222a105.813333 105.813333 0 1 0-147.911111-147.911112L360.675556 347.591111A197.404444 197.404444 0 1 1 638.293333 625.777778z","p-id":"2045",fill:"#ffffff"}));const B=c.memo((e=>{const{children:t,onClose:n}=e,l=i.exports.useRef(document.createElement("div"));return i.exports.useEffect((()=>(l.current.classList.add("notify-portal-container"),document.documentElement.appendChild(l.current),()=>{document.documentElement.removeChild(l.current)})),[e.children]),d.createPortal(c.createElement(c.Fragment,null,c.createElement("div",{className:"notify-portal-content"},e.children),c.createElement("div",{className:"notify-portal-close",onClick:()=>{n&&n()}},c.createElement(H,null))),l.current)}));function V(){I({title:"我的"});const[e,t]=i.exports.useState("火星用户"),{value:n,setTheme:l}=i.exports.useContext(_);console.log("当前主题",n.titleZh);const{show:s,RenderNotification:a}=(()=>{const[e,t]=i.exports.useState(!1),n=()=>t(!1);return{show:()=>t(!0),hide:n,RenderNotification:({children:t})=>e?c.createElement(B,{onClose:n},t):null}})(),r=u();i.exports.useEffect((()=>{const e=localStorage.getItem("vite-react-zhihu-user-token");console.log("userToken",e),t(e),e||r.push("/login/index"),s()}),[]);const o=h().format("YYYY年MM月DD日");return c.createElement("div",{className:P.userIndexPage},c.createElement(a,null,c.createElement(c.Fragment,null,"今天是",o,", 祝大家牛年大吉啦")),c.createElement("div",{className:P.userMain},c.createElement("div",{className:P.userInfo},c.createElement("img",{className:P.userHeadImg}),c.createElement("div",{className:P.userInfoAbbr},c.createElement("div",{className:P.userName},e))),c.createElement("div",{className:P.themeSetting},c.createElement("div",{className:P.themeSettingTitle},"当前主题：",c.createElement("div",{className:P.currentTheme},n.titleZh)),c.createElement("div",{className:P.themeList},E.map((e=>c.createElement("div",{className:P.themeSettingItem,key:e.hex,style:{background:e.hex},onClick:()=>(e=>{l(e),console.log("切换主题",e)})(e)},e.titleZh))))),c.createElement("div",{className:P.logout,onClick:()=>{localStorage.removeItem("vite-react-zhihu-user-token"),r.push("/login/index")}},"退出登录")),c.createElement(w,null))}var R="_login-index-container_1vqee_1",U="_main_1vqee_5",Z="_title_1vqee_9",j="_field-box_1vqee_16",O="_label_1vqee_22",D="_submit-btn_1vqee_42";const $=c.createContext(null),Y=$.Provider;function A({children:e,form:t,onFinish:n,onFinishFailed:l}){return c.createElement("form",{onSubmit:e=>{e.preventDefault(),t.submit().then(n).catch(l)}},c.createElement(Y,{value:t},e))}function J(e){const{children:t,name:n}=e,l=i.exports.useContext($);i.exports.useEffect((()=>{const{unRegisterField:t}=l.registerField({props:e});return()=>{t({props:e})}}),[]);return c.cloneElement(t,{value:l.getFieldValue(n),onChange:e=>{const t=e.target.value;console.log("newValue",t),l.setFieldValue({[n]:t})}})}$.Consumer;class W{constructor(){this.getFieldValue=e=>this.store[e],this.setFieldValue=e=>{console.log("setFieldValue",e),this.store=a(a({},this.store),e)},this.registerField=e=>(this.entities.push(e),{unRegisterField:()=>{this.entities=this.entities.filter((t=>t!==e)),delete this.store[e.props.name]}}),this.validate=()=>{let e=[];return this.entities.forEach((t=>{const{name:n,rules:l}=t.props;l.forEach((t=>{t.required&&!this.store[n]&&e.push({[n]:t.msg,value:this.store[n]})}))})),{success:!e.length,errs:e}},this.submit=()=>{const{success:e,errs:t}=this.validate();return console.log("into formStore submit",e,t),new Promise(((n,l)=>{e?n(this.store):l(t)}))},this.store={},this.entities=[]}}function G(){const[e]=[new W],t=u();I({title:"登录"});return c.createElement("div",{className:R},c.createElement("div",{className:U},c.createElement("header",{className:Z},"登录"),c.createElement(A,{form:e,onFinish:e=>{console.log("onfinish",e),localStorage.setItem("vite-react-zhihu-user-token",e.userName),console.log("history.length",t.length),t.length>1?t.goBack():t.push("/user/index")},onFinishFailed:e=>{console.log("onFinishFailed",e)}},c.createElement(c.Fragment,null,c.createElement("div",{className:j},c.createElement("div",{className:O},"账号"),c.createElement(J,{name:"userName",rules:[{required:!0,msg:"用户名不能为空～"}]},c.createElement("input",{type:"text",placeholder:"请输入用户名"}))),c.createElement("div",{className:j},c.createElement("div",{className:O},"密码"),c.createElement(J,{name:"password",rules:[{required:!0,msg:"密码不能为空～"}]},c.createElement("input",{type:"password",placeholder:"请输入密码"}))),c.createElement("button",{type:"submit",className:D},"登录")))))}var K=()=>{const[e,t]=i.exports.useState(E[0]);return c.createElement(f,{value:{value:e,setTheme:e=>{t(e),document.documentElement.style.setProperty("--themeColor",e.hex)}}},c.createElement(p,{basename:""},c.createElement(v,{path:"/",exact:!0,component:M}),c.createElement(v,{path:"/home/index",component:M}),c.createElement(v,{path:"/msg/index",component:L}),c.createElement(v,{path:"/user/index",component:V}),c.createElement(v,{path:"/login/index",component:G})))};d.render(c.createElement(c.StrictMode,null,c.createElement(K,null)),document.getElementById("root"));
